<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>For Haniya â¤ï¸</title>
  <link rel="stylesheet" href="style.css">
</head>

<body class="question-page">

  <!-- IMAGE SECTION -->
  <div class="question-hero">
    <div class="overlay"></div>
  </div>

  <!-- CONTENT -->
  <div class="floating-content">
    <h1>Haniya â¤ï¸</h1>

    <h2>Will you be my Valentine?</h2>

    <p>
      From that moment to every moment afterâ€¦  
      I still choose you. Every single time.
    </p>

    <div class="buttons">
      <button id="yesBtn">Yes ğŸ’•</button>
      <button id="noBtn">No ğŸ˜’</button>
    </div>
  </div>

  <!-- SCRIPT -->
  <script>
    const noBtn = document.getElementById("noBtn");
    const yesBtn = document.getElementById("yesBtn");

    let clicks = 0;
    let noAlive = true;

    const messages = [
      "what the fuck?",
      "you for real?",
      "nah ğŸ˜’",
      "go press YES",
      "WRONG BUTTON",
      "last warning ğŸ˜¡",
      "stop playing",
      "ok bye ğŸ’¥"
    ];

    function clamp(value, min, max) {
      return Math.min(Math.max(value, min), max);
    }

    function setFixedPosition(el) {
      const rect = el.getBoundingClientRect();
      el.style.position = "fixed";
      el.style.left = `${rect.left}px`;
      el.style.top = `${rect.top}px`;
      el.classList.add("free");
    }

    function ensureFree(el) {
      if (!el.classList.contains("free")) {
        setFixedPosition(el);
      }
    }

    function randomMove(el, range = 160) {
      ensureFree(el);
      const rect = el.getBoundingClientRect();
      const padding = 16;
      const x = rect.left + (Math.random() * range - range / 2);
      const y = rect.top + (Math.random() * range - range / 2);
      const clampedX = clamp(x, padding, window.innerWidth - rect.width - padding);
      const clampedY = clamp(y, padding, window.innerHeight - rect.height - padding);
      el.style.left = `${clampedX}px`;
      el.style.top = `${clampedY}px`;
    }

    document.addEventListener("DOMContentLoaded", () => {
      requestAnimationFrame(() => {
        setFixedPosition(yesBtn);
        setFixedPosition(noBtn);
      });
    });

    window.addEventListener("resize", () => {
      ensureFree(yesBtn);
      ensureFree(noBtn);
    });

    // NO button logic
    noBtn.addEventListener("click", () => {
      if (!noAlive) return;

      randomMove(noBtn);

      if (clicks < messages.length) {
        noBtn.textContent = messages[clicks];
      }

      const red = Math.min(255, 100 + clicks * 35);
      noBtn.style.background = `rgb(${red}, 40, 40)`;
      noBtn.style.color = "white";

      clicks++;

      if (clicks === messages.length) {
        noAlive = false;
        noBtn.classList.add("burst");
        setTimeout(() => noBtn.remove(), 600);
      }
    });

    // YES runs away until NO is gone
    function fleeYes() {
      if (!noAlive) return;
      randomMove(yesBtn, 140);
    }

    yesBtn.addEventListener("mouseenter", fleeYes);
    yesBtn.addEventListener("mousemove", fleeYes);
    yesBtn.addEventListener("pointerenter", fleeYes);
    yesBtn.addEventListener("touchstart", fleeYes, { passive: true });

    yesBtn.addEventListener("click", (e) => {
      if (noAlive) {
        e.preventDefault();
        randomMove(yesBtn, 160);
        return;
      }
      window.location.href = "fireworks.html";
    });
  </script>

</body>
</html>
